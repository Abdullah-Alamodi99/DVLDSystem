@model LicenseVM
@{
    ViewData["Title"] = "رخص الشخص";
}
<div class="main-content mt-4">
    <div class="container overflow-hidden">
        <div class="person-info">
            <partial name="_PersonCardWithFilter" model="@Model.Person" />
        </div>

        <div class="License-history mt-3">
            <div class="card bg-white rounded border-0 mb-4 shadow-sm">
                <div class="card-header bg-primary text-white p-3">
                    <h5 class="text-white mb-0">رخص السائق</h5>
                </div>

                <div class="card-body">
                    <ul class="nav nav-pills my-3 p-3 bg-white flex-wrap justify-content-center" id="pills-tab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="pills-PersonInfo-tab" data-bs-toggle="pill"
                                    data-bs-target="#pills-PersonInfo" type="button" role="tab"
                                    aria-controls="pills-PersonInfo" aria-selected="true">
                                محلية
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="pills-LoginInfo-tab" data-bs-toggle="pill"
                                    data-bs-target="#pills-LoginInfo" type="button" role="tab"
                                    aria-controls="pills-LoginInfo" aria-selected="false">
                                دولية
                            </button>
                        </li>
                    </ul>

                    <div class="tab-content" id="pills-tabContent">
                        <!-- Local Licenses -->
                        <div class="tab-pane fade show active" id="pills-PersonInfo" role="tabpanel"
                             aria-labelledby="pills-PersonInfo-tab">
                            <div class="table-responsive bg-white shadow rounded p-3" style="overflow-x:auto;">
                                <table class="table table-striped table-borderless align-middle text-center mb-0" style="white-space: nowrap;">
                                    <thead>
                                        <tr>
                                            <th>رقم الرخصة</th>
                                            <th>رقم الطلب</th>
                                            <th>فئة الرخصة</th>
                                            <th>تاريخ الإصدار</th>
                                            <th>تاريخ الانتهاء</th>
                                            <th>نشطة</th>
                                            <th>معلومات الرخصة</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @if(!Model.Licenses.Any() || Model.Licenses == null)
                                        {
                                            <tr>
                                                <td colspan="7" class="text-center text-muted py-3">
                                                    لا توجد رخص محلية
                                                </td>
                                            </tr>
                                        }
                                        else
                                        {
                                            @foreach (var License in Model.Licenses)
                                            {
                                                <tr>
                                                    <td>@License.Id</td>
                                                    <td>@License.ApplicationId</td>
                                                    <td>@License.LicenseClass.Name</td>
                                                    <td>@License.IssueDate.ToShortDateString()</td>
                                                    <td>@License.ExpirationDate.ToShortDateString()</td>
                                                    <td>
                                                        <input type="checkbox" class="input-checkbox-disabled" @(License.IsActive ? "checked" : "") />
                                                    </td>
                                                    <td>
                                                        <a asp-controller="License" asp-action="LicenseInfoById"
                                                           asp-route-Id="@License.Id" class="btn btn-info">
                                                            معلومات الرخصة
                                                        </a>
                                                    </td>
                                                </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- International Licenses -->
                        <div class="tab-pane fade" id="pills-LoginInfo" role="tabpanel"
                             aria-labelledby="pills-LoginInfo-tab">
                            <div class="table-responsive bg-white shadow rounded p-3" style="overflow-x:auto;">
                                <table class="table table-striped table-borderless align-middle text-center mb-0" style="white-space: nowrap;">
                                    <thead>
                                        <tr>
                                            <th>رقم الرخصة</th>
                                            <th>رقم الطلب</th>
                                            <th>رقم الرخصة المحلية</th>
                                            <th>تاريخ الإصدار</th>
                                            <th>تاريخ الانتهاء</th>
                                            <th>نشطة</th>
                                            <th>معلومات الرخصة</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @if(!Model.InternationalLicenses.Any() || Model.InternationalLicenses == null)
                                        {
                                            <tr>
                                                <td colspan="7" class="text-center text-muted py-3">
                                                    لا توجد رخص دولية
                                                </td>
                                            </tr>
                                        }
                                        else
                                        {
                                            @foreach (var InternationalLicense in Model.InternationalLicenses)
                                            {
                                                <tr>
                                                    <td>@InternationalLicense.Id</td>
                                                    <td>@InternationalLicense.Id</td>
                                                    <td>@InternationalLicense.IssuedUsingLocalLicenseId</td>
                                                    <td>@InternationalLicense.IssueDate.ToShortDateString()</td>
                                                    <td>@InternationalLicense.ExpirationDate.ToShortDateString()</td>
                                                    <td>
                                                        <input type="checkbox" class="input-checkbox-disabled" @(InternationalLicense.IsActive ? "checked" : "") />
                                                    </td>
                                                    <td>
                                                        <a asp-controller="InternationalLicense" asp-action="LicenseInfo"
                                                           asp-route-Id="@InternationalLicense.Id" class="btn btn-info">
                                                            معلومات الرخصة
                                                        </a>
                                                    </td>
                                                </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('#personFilter').addClass('disabled');
        });
    </script>
}
